p8105_hw2
================

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.6
    ## ✔ forcats   1.0.1     ✔ stringr   1.6.0
    ## ✔ ggplot2   4.0.1     ✔ tibble    3.3.1
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.2
    ## ✔ purrr     1.2.1     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(janitor)
```

    ## 
    ## Attaching package: 'janitor'
    ## 
    ## The following objects are masked from 'package:stats':
    ## 
    ##     chisq.test, fisher.test

## Problem 1

``` r
pols_data = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day")) %>% 
  mutate(month = recode(month, `01` = "january", `02` = "february", `03` = "march", `04` = "april", `05` = "may", `06` = "june", `07` = "july", `08` = "august", `09` = "september", `10` = "october", `11` = "november", `12` = "december")) %>% 
  pivot_longer(
    cols = c(prez_gop, prez_dem),
    names_to = "president",
    values_to = "prez_words") %>%  
  select(-day) %>% 
  pivot_longer(
    cols = c(gov_gop, gov_dem),
    names_to = "governor",
    values_to = "gov_words") %>% 
  pivot_longer(
    cols = c(sen_gop, sen_dem),
    names_to = "senator",
    values_to = "sen_words") %>% 
  pivot_longer(
    cols = c(rep_gop, rep_dem),
    names_to = "representative",
    values_to = "rep_words"
  )
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_data =
  read_csv("./fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec,
    names_to = "month") %>% 
  mutate(month = recode(month, `jan` = "january", `feb` = "february", `mar` = "march", `apr` = "april", `may` = "may", `jun` = "june", `jul` = "july", `aug` = "august", `sep` = "september", `oct` = "october", `nov` = "november", `dec` = "december"))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_data = 
  read_csv("./fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("year", "month", "day")) %>% 
  mutate(month = recode(month, `1` = "january", `2` = "february", `3` = "march", `4` = "april", `5` = "may", `6` = "june", `7` = "july", `8` = "august", `9` = "september", `10` = "october", `11` = "november", `12` = "december")) %>% 
  select(-day) %>% 
  mutate(year = str_pad(year, width = 2, pad = "0")) %>% 
  mutate(year = paste0("20", year))
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
p_and_s_data = 
  full_join(
    (pols_data %>% 
       mutate(year = as.integer(year))),
    (snp_data %>% 
      mutate(year = as.integer(year))), 
    by = c("year", "month"))
```

    ## Warning in full_join((pols_data %>% mutate(year = as.integer(year))), (snp_data %>% : Detected an unexpected many-to-many relationship between `x` and `y`.
    ## ℹ Row 10385 of `x` matches multiple rows in `y`.
    ## ℹ Row 7 of `y` matches multiple rows in `x`.
    ## ℹ If a many-to-many relationship is expected, set `relationship =
    ##   "many-to-many"` to silence this warning.

``` r
pus_data = 
  full_join(
    (p_and_s_data %>% 
      mutate(year = as.integer(year))),
    (unemployment_data %>% 
       mutate(year = as.integer(year))),
    by = c("year", "month"))
```

## Problem 2

``` r
mr_trash_wheel = 
  readxl::read_excel(
    path = "./202409 Trash Wheel Collection Data.xlsx", 
    sheet = "Mr. Trash Wheel",
    range = "A2:N653") %>% 
  janitor::clean_names() %>% 
  mutate(sports_balls = as.integer(sports_balls)) %>% 
  mutate(homes_powered = as.integer(homes_powered)) %>% 
  select(-year, -month)
```

``` r
prof_trash_wheel = 
  readxl::read_excel(
    path = "./202409 Trash Wheel Collection Data.xlsx",
    sheet = "Professor Trash Wheel",
    range = "A2:M120") %>% 
  janitor::clean_names() %>% 
  mutate(homes_powered = as.integer(homes_powered)) %>% 
  select(-year, -month)
```

``` r
gwynnda_trash_wheel = 
  readxl::read_excel(
    path = "./202409 Trash Wheel Collection Data.xlsx",
    sheet = "Gwynnda Trash Wheel",
    range = "A2:L265") %>% 
  janitor::clean_names() %>% 
  mutate(homes_powered = as.integer(homes_powered)) %>% 
  select(-year, -month)
```

``` r
trash_wheel = 
  bind_rows(mr_trash_wheel, prof_trash_wheel, gwynnda_trash_wheel)
  by = c("day")
```

## Problem 3

``` r
data_1 = 
  read_csv("./zillow_data/Zip Codes.csv") %>% 
  janitor::clean_names() %>% 
  relocate(file_date) %>% 
  select (-state_fips, -county_code, -county_fips) %>% 
  rename(date = file_date) %>% 
  mutate(date = mdy(date))
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
data_2 = 
  read_csv("./zillow_data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    cols = starts_with("x"),
    names_to = "date",
    values_to = "price") %>%
  mutate(date = ymd(sub("^x", "", date))) %>% 
  relocate(date) %>% 
  select(-region_id, -size_rank, -region_type, -state_name, -state, -city, -metro) %>% 
  rename(county = county_name, zip_code = region_name)
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
data_combined = 
  full_join(data_2, data_1)
```

    ## Joining with `by = join_by(date, zip_code, county)`

``` r
  by = c("date", "county", "zip_code")
```
